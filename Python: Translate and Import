import subprocess
import time
from litemapy import Schematic, Region, BlockState

cheat_engine_path = r"C:/Program Files/Cheat Engine 7.5/Cheat Engine.exe"

def convert_mc_id_to_cc_id(cc_id: str) -> str:
    cc_id = int(cc_id, 16)
    match cc_id:
        case 100:
            return "minecraft:dirt"
        case 101:
            return "minecraft:grass_block"
        case 105:
            return "minecraft:mud"
        case 106:
            return "minecraft:iron_ore"
        case 109:
            return "minecraft:sand"
        case 111:
            return "minecraft:cobblestone"
        case 112:
            return "minecraft:coal_ore"
        case 113:
            return "minecraft:sweet_berry_bush"
        case 116:
            return "minecraft:oxeye_daisy"
        case 117:
            return "minecraft:red_mushroom"
        case 119:
            return "minecraft:white_terracotta"
        case 120:
            return "minecraft:light_gray_terracotta"
        case 127:
            return "minecraft:dead_bush"
        case 133:
            return "minecraft:granite"
        case 138:
            return "minecraft:water"
        case 141:
            return "minecraft:pink_tulip"
        case 142:
            return "minecraft:red_tulip"
        case 143:
            return "minecraft:blue_orchid"
        case 144:
            return "minecraft:dandelion"
        case 145:
            return "minecraft:snow_block"
        case 146:
            return "minecraft:smooth_basalt"
        case 147:
            return "minecraft:packed_ice"
        case 217:
            return "minecraft:birch_fence"
        case 218:
            return "minecraft:azalea_leaves"
        case 219:
            return "minecraft:mycelium"
        case 220:
            return "minecraft:blackstone"
        case 221:
            return "minecraft:spruce_fence"
        case 222:
            return "minecraft:spruce_leaves"
        case 223:
            return "minecraft:dead_tube_coral_block"
        case 224:
            return "minecraft:oak_fence"
        case 225:
            return "minecraft:oak_leaves"
        case 226:
            return "minecraft:red_mushroom"
        case 227:
            return "minecraft:cactus"
        case 228:
            return "minecraft:lily_pad"
        case 229:
            return "minecraft:dark_oak_fence"
        case 230:
            return "minecraft:sculk"
        case 231:
            return "minecraft:soul_soil"
        case 233:
            return "minecraft:gold_ore"
        case 234:
            return "minecraft:spruce_leaves"
        case 235:
            return "minecraft:blue_ice"
        case 238:
            return "minecraft:sweet_berry_bush"
        case 239:
            return "minecraft:sweet_berry_bush"
        case 240:
            return "minecraft:lava"
        case 241:
            return "minecraft:sweet_berry_bush"
        case 242:
            return "minecraft:sweet_berry_bush"
        case 243:
            return "minecraft:sweet_berry_bush"
        case 244:
            return "minecraft:sweet_berry_bush"
        case 245:
            return "minecraft:sweet_berry_bush"
        case 246:
            return "minecraft:sweet_berry_bush"
        case 247:
            return "minecraft:sweet_berry_bush"
        case 248:
            return "minecraft:sweet_berry_bush"
        case 249:
            return "minecraft:jungle_fence"
        case 250:
            return "minecraft:jungle_leaves"
        case 251:
            return "minecraft:jungle_fence"
        case 302:
            return "minecraft:grass_block"
        case 303:
            return "minecraft:muddy_mangrove_roots"
        case 372:
            return "minecraft:skeleton_skull"
        case 373:
            return "minecraft:fern"
        case 390:
            return "minecraft:beehive"
        case 856:
            return "minecraft:sugar_cane"
        case _:
            return "minecraft:air"

def create_litematic():
    # Read and translate text
    reg = Region(0, 0, 0, 100, 100, 100)
    schem = reg.as_schematic(name="Realm", author="TreacherousDev", description="Made with Litemapy")
    with open('LuaOutput.txt', 'r') as file:
        for line in file:
            block_data = line.strip().split()
            if len(block_data) != 7:
                print("Litematic creation has been completed")
                continue
            x = int(block_data[0], 16)
            z = int(block_data[1], 16)
            y = 99 - int(block_data[2], 16)
            cc_id = block_data[6].zfill(2) + block_data[5]
            mc_id = convert_mc_id_to_cc_id(cc_id)
            reg[x, y, z] = BlockState(mc_id)

    # Save the schematic
    schem.save("C:/Users/adant/curseforge/minecraft/Instances/Litematica/schematics/TreacherousDev.litematic")


# Run Cheat Engine and process output
if __name__ == "__main__":
    cheat_engine = subprocess.Popen([cheat_engine_path])
    time.sleep(12)
    create_litematic()




